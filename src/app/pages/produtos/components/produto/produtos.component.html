<ngx-loading
  [show]="processando"
  [config]="{ backdropBorderRadius: '3px' }"
></ngx-loading>

<h1 mat-dialog-title>Cadastro de Produtos</h1>
<div mat-dialog-content>
  <mat-accordion>
    <mat-expansion-panel
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
      style="margin-bottom: 16px"
    >
      <mat-expansion-panel-header>
        <mat-panel-title>Cadastrar novo produto</mat-panel-title>
      </mat-expansion-panel-header>
      <form [formGroup]="form">
        <div class="linha">
          <mat-form-field style="width: 100%; padding-top: 8px" cdkFocusInitial>
            <mat-label>Nome</mat-label>
            <input
              type="text"
              matInput
              #inputnome
              (focus)="inputnome.select()"
              formControlName="nome"
              cdkFocusInitial
            />
          </mat-form-field>
          <mat-form-field style="width: 100%; padding-top: 8px">
            <mat-label>Cód. Barras</mat-label>
            <input
              type="text"
              matInput
              #inputcodigo_barras
              (focus)="inputcodigo_barras.select()"
              formControlName="codigo_barras"
            />
          </mat-form-field>
        </div>
        <div class="linha">
          <mat-form-field style="width: 100%; padding-top: 8px" cdkFocusInitial>
            <mat-label>QR Code</mat-label>
            <input
              type="text"
              matInput
              #inputqr_code
              (focus)="inputqr_code.select()"
              formControlName="qr_code"
              cdkFocusInitial
            />
          </mat-form-field>
          <mat-form-field style="width: 100%; padding-top: 8px">
            <mat-label>NCM</mat-label>
            <input
              type="text"
              matInput
              #inputncm
              (focus)="inputncm.select()"
              formControlName="ncm"
            />
          </mat-form-field>
        </div>
        <div class="linha">
          <mat-form-field style="width: 100%; padding-top: 8px">
            <mat-label>Categoria</mat-label>
            <button
              matPrefix
              mat-icon-button
              color="primary"
              (click)="categoriaF2()"
            >
              <mat-icon>search</mat-icon>
            </button>
            <input
              type="text"
              matInput
              #inputcategoria_id
              (focus)="inputcategoria_id.select()"
              formControlName="categoria_id"
              [disabled]="true"
            />
          </mat-form-field>
          <mat-form-field style="width: 100%; padding-top: 8px">
            <mat-label>Sub-Categoria</mat-label>
            <button matPrefix mat-icon-button color="primary">
              <mat-icon>search</mat-icon>
            </button>
            <input
              type="text"
              matInput
              #inputsub_categoria_id
              (focus)="inputsub_categoria_id.select()"
              formControlName="sub_categoria_id"
              [disabled]="true"
            />
          </mat-form-field>
        </div>
        <mat-form-field style="width: 100%; padding-top: 8px">
          <mat-label>Descrição</mat-label>
          <textarea
            matInput
            cols="30"
            rows="5"
            #inputdescricao
            (focus)="inputdescricao.select()"
            formControlName="descricao"
          ></textarea>
        </mat-form-field>
      </form>
    </mat-expansion-panel>
  </mat-accordion>

  <table mat-table [dataSource]="datasource" class="mat-elevation-z1">
    <ng-container matColumnDef="nome">
      <th mat-header-cell *matHeaderCellDef>Nome</th>
      <td mat-cell *matCellDef="let element">{{ element.nome }}</td>
    </ng-container>

    <ng-container matColumnDef="codigo_barras">
      <th mat-header-cell *matHeaderCellDef>Cód. Barras</th>
      <td mat-cell *matCellDef="let element">{{ element.codigo_barras }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
<div mat-dialog-actions>
  <button mat-button color="warn" (click)="onNoClick()">Fechar</button>
</div>
